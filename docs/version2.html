<html>
<head>
    <!--load p5.js library so we can use a few of its tools-->
    <script scr = "http://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.js"></script>
    <script>
        // store some data in "global"variables known to all functions
        var url = "http://api.nytimes.com/svc/search/v2/articlesearch.json?q=rainbow&api-key=iGRJBxHl5BzZ4Cs6AjByeQ6lVpflBOxg";
        var articleCount = 0
        
        //setup is a standard way P5 starts a script.
        function setup(){
            noCanvas();
            //send the url and when the data comes back, run the dunction "gotData"
            loadJSON(url,gotData);
        }
        //gotData for now just writes
        function gotData(data){
            appendToPage(data)
            //API delives 10 articles at a time. check metadata to see if there are more on subsequent "page"
            var hits = data.response.meta.hits
            //LOOP(here just twice) appending a "page=" parameter to the url and send the result to appendToPage()
            //alert("FUNCTION GOT DATA ACTIVVATED")
            //var text = ''
        
            for (var i=1; i < 3;i++){
                loadJSON(url+'&page=' + 1, appendToPage)
            }
        }
        
        function appendToPage(data){
            //move the docs array part of JSON object to "article" to save typing
            var article = data.response.docs;
            //loop over the array, creating a heading and a paragraph for each article
            for (var i =0; i < articles.length; i++){
                articleCount++
                h=document.createElement('h3')
                h.innerHTML='(' + articleCount+')' +articles[i].headline.main
                document.body.appendChild(h);
                p=document.createElement[i].snippet
                document.body.appendChild(p);
            }
        }
    </script>
   
</head>
<body>
    <h1>keyword</h1>
    <input type = "text" id ="keyword" value = "Toronto">
    <button type ="button" onclick= "myDisplay()">Search</button>
    <h3>Request URL:</h3>
    <h4 id = "myURL"></h4>
    <h1>New York Times API: Articles from all time about rainbows</h1>
</body> 
    
</html>
  
  